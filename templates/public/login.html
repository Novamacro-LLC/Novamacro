{% extends 'public/base.html' %}
{% load static %}
{% block content %}
  <div class="section">
    <div class="container">
      <div class="wrapper-m"></div>
    </div>
  </div>
  <div class="w-form wrapper-m">
    <!--<form id="form-4" name="email-form" data-name="Email Form" method="post" class="form" data-wf-page-id="673a5ec0a6ff68067bbdef74" data-wf-element-id="3e8ff474-5e30-2e47-4a99-f3b2ab42e3bc">
      {% csrf_token %} 
      <input type="hidden" name="form_submitted" value="1">
      <input class="input medium w-input" 
             maxlength="256" 
             name="username"  
             placeholder="E-mail address" 
             type="email" 
             id="email-form-4" 
             required="">
      <input class="input medium w-input" 
             maxlength="256" 
             name="password" 
             placeholder="Password" 
             type="password" 
             id="password-form-4" 
             required="">
      <input type="submit" 
             data-wait="Please wait..." 
             class="button medium form-button w-button" 
             value="Sign in">
      <div class="form-footer-links">
        <a href="{% url 'products' %}">Don&#x27;t have an account?</a>
        <a href="{% url 'internal:password_reset' %}">Forgot password?</a>
      </div>
    </form>-->
  
  <form id="form-4" 
      name="email-form" 
      method="post" 
      class="form"
      action="{% url 'internal:login' %}">
  {% csrf_token %}
  <input class="input medium w-input" 
         maxlength="256" 
         name="username"  
         placeholder="E-mail address" 
         type="email" 
         id="email-form-4" 
         required="">
  <input class="input medium w-input" 
         maxlength="256" 
         name="password" 
         placeholder="Password" 
         type="password" 
         id="password-form-4" 
         required="">
  <button type="submit" 
          class="button medium form-button w-button">
    Sign in
  </button>
  <div class="form-footer-links">
    <a href="{% url 'products' %}">Don&#x27;t have an account?</a>
    <a href="{% url 'internal:password_reset' %}">Forgot password?</a>
  </div>
</form>

    {% if messages %}
    <div class="w-form-done" style="display: block;">
      {% for message in messages %}
        <div>{{ message }}</div>
      {% endfor %}
    </div>
    {% endif %}

    {% if form.errors %}
    <div class="w-form-fail" style="display: block;">
      <div>Invalid email or password. Please try again.</div>
    </div>
    {% endif %}
  </div>
  <div class="section">
    <div class="container">
      <div class="wrapper-m"></div>
    </div>
  </div>
    {% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get the form
    const form = document.getElementById('form-4');
    
    // Remove Webflow's event listeners
    if (window.Webflow) {
        window.Webflow.destroy();
    }
    
    // Add our own submit handler
    form.addEventListener('submit', function(e) {
        // Don't prevent the default form submission
        // Just let it submit normally to Django
        return true;
    });
});
</script>
{% endblock %}
{% endblock %}